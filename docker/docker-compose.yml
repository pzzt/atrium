version: '3.8'

services:
  atrium:
    image: pzzt/atrium:latest
    container_name: atrium
    restart: unless-stopped
    ports:
      - "8080:80"
    environment:
      - TZ=Europe/Rome
    volumes:
      - atrium-data:/data
      # K3s kubeconfig for cluster monitoring (optional)
      - /etc/rancher/k3s/k3s.yaml:/root/.kube/config:ro
    # Optional: Resource limits for Raspberry Pi
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 256M
        reservations:
          cpus: '0.25'
          memory: 64M
    # Alternative: Use host network for K3s access (uncomment if kubeconfig mount doesn't work)
    # network_mode: host

volumes:
  atrium-data:
    driver: local
